using T=tuple<int,int,int>;
class Solution {
public:
    int trapRainWater(vector<vector<int>>& arr) {
        int n=arr.size();
        int m=arr[0].size();
        priority_queue<T,vector<T>,greater<>>pq;
        vector<vector<bool>>vis(n,vector<bool>(m,0));
        for(int i=0;i<n;i++){
            for(int j=0;j<m;j++){
                if(i==0 || j==0 ||i==n-1 || j==m-1){
                    vis[i][j]=true;
                    pq.push({arr[i][j],i,j});
                }
            }
        }
        int dr[4]={1,-1,0,0};
        int dc[4]={0,0,-1,1};
        int ans=0;
        while(pq.size()!=0){
            auto [lvl,r,c]=pq.top();pq.pop();
            

            for(int i=0;i<4;i++){
                int nr=dr[i]+r;
                int nc=dc[i]+c;
                if(nr>=0 && nc>=0 && nr<n && nc<m && vis[nr][nc]==false){
                    int water=max(0,(arr[r][c]-arr[nr][nc]));
                    ans+=water;
                    arr[nr][nc]+=water;
                    pq.push({arr[nr][nc],nr,nc});
                    vis[nr][nc]=true;
                }
            }
        }
    return ans;

    }
};
